import{c as d,a6 as u,a7 as b,r as n,A as e,a3 as j}from"./index-z1XCOSyM.js";import{s as y,L as N,P as w,u as v}from"./client-DM1ecDhS.js";import k from"./index-BONI-9hD.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],S=d("book-open",I);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_=d("info",L);function E(){const h=u(),{slug:r}=b(),[l,m]=n.useState(null),[g,c]=n.useState(!1),[f,p]=n.useState([]);return n.useEffect(()=>{c(!0);const s=sessionStorage.getItem(r||""),t=sessionStorage.getItem(`${r}_timestamp`),a=Date.now();s&&t&&a-parseInt(t)<6e5?(c(!1),m(JSON.parse(s))):y.fetch(`*[_type == 'portfolio' && slug.current == "${r}"] {
          title,
          tools[] -> { 
            name 
          },
          mainImage { 
            asset -> { 
              url 
            }, 
            alt 
          },
          body
        }`).then(o=>{c(!1),o.length>0&&(m(o[0]),sessionStorage.setItem(r||"",JSON.stringify(o[0])),sessionStorage.setItem(`${r}_timestamp`,a.toString()))}).catch(console.error)},[r]),n.useEffect(()=>{if(l!=null&&l.body){const s=[];l.body.forEach(t=>{var a;if(t._type==="block"&&(t.style==="h2"||t.style==="h3")){const o=((a=t.children)==null?void 0:a.filter(i=>i._type==="span").map(i=>i.text).join(""))||"",x=o.toLowerCase().replace(/\s+/g,"-");s.some(i=>i.id===x)||s.push({id:x,text:o,level:t.style==="h2"?2:3})}}),p(s)}},[l==null?void 0:l.body]),e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:"h-screen items-center justify-center flex flex-col gap-5 roboto-normal",children:[e.jsx(N,{className:"h-20 w-20 animate-spin",color:"white"}),e.jsx("span",{className:"animate-pulse duration-100 text-white",children:"Loading"})]}):l?e.jsxs("div",{className:"text-white flex flex-col lg:flex-row px-10 gap-10 roboto-normal",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-25 px-10 left-0 pb-5 fixed flex flex-row gap-2 z-5",children:e.jsxs("div",{className:"group cursor-pointer h-fit flex flex-row items-center gap-1 hover:scale-115 transform transition duration-200",onClick:()=>h("/portfolios"),children:[e.jsx(j,{color:"white",size:25}),e.jsx("span",{className:"text-white text-xl",children:"Back"})]})}),e.jsxs("aside",{className:"hidden lg:block sticky top-1/4 h-max w-64 border-l border-gray-700 pl-4 text-sm text-gray-300",children:[e.jsx("h3",{className:"text-white mb-3 font-semibold",children:"Table of Contents"}),e.jsx("ul",{className:"space-y-1",children:f.map(s=>e.jsx("li",{className:`mb-2 ${s.level===3?"ml-4 text-gray-400 text-sm":""}`,children:e.jsx("a",{href:`#${s.id}`,className:"hover:text-white transition-colors duration-150",onClick:t=>{t.preventDefault();const a=document.getElementById(s.id);a&&a.scrollIntoView({behavior:"smooth",block:"start"})},children:s.text})},s.id))})]})]}),e.jsxs("article",{className:"w-full lg:w-2/3 mt-25 mb-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:l.title}),e.jsx("img",{src:l.mainImage.asset.url,className:"h-[300px] w-full object-cover rounded-md mb-8"}),e.jsx(w,{value:l.body,components:{types:{image:({value:s})=>{const t=v(s).width(800).url();return e.jsx("div",{className:"my-6 flex justify-start",children:e.jsx("img",{src:t,alt:s.alt,className:"rounded-md w-full lg:w-2/3"})})}},block:{h2:({children:s})=>{const a=String(s).toLowerCase().replace(/\s+/g,"-");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-px my-10 bg-gradient-to-r from-transparent via-gray-500 to-transparent"}),e.jsxs("h2",{id:a,className:"text-3xl font-semibold mt-8 mb-4 flex items-center gap-2 underline scroll-mt-25",children:[e.jsx(S,{size:20}),s]})]})},h3:({children:s})=>{const a=String(s).toLowerCase().replace(/\s+/g,"-");return e.jsx("h3",{id:a,className:"text-2xl font-medium mb-3 mt-6 scroll-mt-25",children:s})},normal:({children:s,index:t})=>{const a=t===0;return e.jsx("p",{className:`mb-4 text-lg ${a?"drop-cap":""}`,children:s})},blockquote:({children:s})=>e.jsxs("div",{className:"border-l-4 pl-4 italic text-gray-400 border-gray-300 mb-5 flex items-start gap-2",children:[e.jsx(_,{size:18,className:"mt-1 text-gray-400"}),e.jsx("blockquote",{children:s})]})},marks:{strong:({children:s})=>e.jsx("strong",{className:"font-bold",children:s}),em:({children:s})=>e.jsx("em",{className:"italic",children:s}),link:({children:s,value:t})=>e.jsx("a",{href:t==null?void 0:t.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:s})},list:{bullet:({children:s})=>e.jsx("ul",{className:"list-disc pl-6 mb-5",children:s}),number:({children:s})=>e.jsx("ol",{className:"list-decimal pl-6 mb-5",children:s})},listItem:{bullet:({children:s})=>e.jsx("li",{className:"mb-2 text-base leading-relaxed text-white",children:s}),number:({children:s})=>e.jsx("li",{className:"mb-2 text-base leading-relaxed text-white",children:s})}}})]})]}):e.jsx(k,{})})}export{E as PortfolioDetails};
